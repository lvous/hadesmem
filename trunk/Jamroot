path-constant TOP
  :
    .
  ;

use-project /Dependencies
  :
    src/dependencies
  ;

use-project /Examples
  :
    examples
  ;

use-project /Memory
  :
    src/memory
  ;

use-project /Tests
  :
    tests
  ; 

project
  :
    requirements
    
    <define>BOOST_USE_WINDOWS_H
    <define>BOOST_SYSTEM_NO_DEPRECATED
    <define>BOOST_FILESYSTEM_NO_DEPRECATED
    
    <define>STRICT
    <define>UNICODE
    <define>_UNICODE
    <define>WIN32_LEAN_AND_MEAN
    
    # TODO: Wrap includes for dependencies so this isn't required
    <define>_CRT_SECURE_NO_WARNINGS
    # TODO: Wrap includes for dependencies so this isn't required
    <define>_SCL_SECURE_NO_WARNINGS
    
    <define>WINVER=_WIN32_WINNT_VISTA
    <define>_WIN32_WINNT=_WIN32_WINNT_VISTA
    
    <architecture>x86
    <threading>multi
    <runtime-link>static
    
    <toolset>msvc:<cxxflags>"/sdl /wd4503"
    # TODO: Work out the reason -std=c++11 needs to be specified last on the command line...
    # TODO: Re-add these warning flags -pedantic -Wextra -Weffc++ -Wshadow -Wconversion
    <toolset>gcc:<cxxflags>"-ansi -std=c++11"
    <toolset>clang:<cxxflags>"-std=c++11"
    <toolset>intel:<cxxflags>"/Qstd=c++0x /Qwd2586"
    
    <debug-symbols>on
    
    <toolset>msvc:<define>HADES_MSVC
    <toolset>gcc:<define>HADES_GCC
    <toolset>clang:<define>HADES_CLANG
    <toolset>intel:<define>HADES_INTEL
  :
    default-build debug
  :
    build-dir bin
  ;
  
build-project src/memory
  ;

build-project examples
  ;

build-project tests
  ;

install dist
  :
    src/memory 
    examples 
  :
    <toolset>msvc,<variant>debug,<address-model>32:<location>dist/msvc/debug/x86
    <toolset>msvc,<variant>debug,<address-model>64:<location>dist/msvc/debug/x64
    <toolset>msvc,<variant>release,<address-model>32:<location>dist/msvc/release/x86
    <toolset>msvc,<variant>release,<address-model>64:<location>dist/msvc/release/x64
    
    <toolset>gcc,<variant>debug,<address-model>32:<location>dist/gcc/debug/x86
    <toolset>gcc,<variant>debug,<address-model>64:<location>dist/gcc/debug/x64
    <toolset>gcc,<variant>release,<address-model>32:<location>dist/gcc/release/x86
    <toolset>gcc,<variant>release,<address-model>64:<location>dist/gcc/release/x64
    
    <toolset>clang,<variant>debug,<address-model>32:<location>dist/clang/debug/x86
    <toolset>clang,<variant>debug,<address-model>64:<location>dist/clang/debug/x64
    <toolset>clang,<variant>release,<address-model>32:<location>dist/clang/release/x86
    <toolset>clang,<variant>release,<address-model>64:<location>dist/clang/release/x64
    
    <toolset>intel,<variant>debug,<address-model>32:<location>dist/intel/debug/x86
    <toolset>intel,<variant>debug,<address-model>64:<location>dist/intel/debug/x64
    <toolset>intel,<variant>release,<address-model>32:<location>dist/intel/release/x86
    <toolset>intel,<variant>release,<address-model>64:<location>dist/intel/release/x64
    
    <install-dependencies>on
    <install-type>SHARED_LIB
    <install-type>EXE
  ;

alias HadesMem
  :
    src/memory//Memory
  ;
